<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>üìÇ Pass CADENA ƒë√£ c·∫•p</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;600;800&display=swap" rel="stylesheet">

<style>
body {
    font-family: "Be Vietnam Pro", sans-serif;
    background: #f5f6fa;
    margin: 20px;
}

/* TITLE */
h1 {
    text-align: center;
    font-size: 40px;
    font-weight: 800;
    background: linear-gradient(90deg, #4facfe, #00f2fe);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* VIEW BUTTON */
.view-pass-btn {
    padding: 12px 18px;
    border: none;
    border-radius: 10px;
    font-size: 15px;
    cursor: pointer;
    font-weight: 600;
    color: white;
    background: linear-gradient(135deg, #8EC5FC, #E0C3FC);
    box-shadow: 0 6px 14px rgba(142,197,252,0.4);
    transition: 0.25s;
}

.view-pass-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(224,195,252,0.5);
}

/* SEARCH BAR */
.search-box {
    text-align:center;
    margin-top: 20px;
}

.search-box input {
    padding: 10px;
    width: 260px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 15px;
}

/* TABLE */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    background: white;
    border-radius: 12px;
    overflow: hidden;
}

th, td {
    padding: 10px;
    border-bottom: 1px solid #ddd;
}

th {
    background: #eef3f8;
}

/* COPY BUTTON */
.copy-btn {
    cursor: pointer;
    background: none;
    border: none;
    font-size: 16px;
    margin-left: 6px;
    color: #007bff;
    font-weight: bold;
}

.copy-btn:hover {
    color: #0056b3;
}

/* TOAST */
.toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #4facfe;
    color: white;
    padding: 12px 18px;
    border-radius: 10px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.25);
    opacity: 0;
    transform: translateY(20px);
    transition: 0.3s;
}
.toast.show {
    opacity: 1;
    transform: translateY(0);
}
</style>
</head>

<body>

<h1>üìÇ Pass CADENA ƒë√£ c·∫•p</h1>

<!-- BUTTON NH·∫¨P KEY -->
<div style="text-align:center;">
    <button onclick="askKeyAndFilter()" class="view-pass-btn">üîë Xem Pass CADENA ƒë√£ c·∫•p</button>
</div>

<!-- SEARCH BAR -->
<div class="search-box">
    <input type="text" id="searchInput" placeholder="T√¨m theo MSNV ho·∫∑c H·ªç T√™n‚Ä¶">
</div>

<!-- TABLE -->
<table id="passTable">
    <thead>
        <tr>
            <th>Date</th>
            <th>MSNV</th>
            <th>H·ªç T√™n</th>
            <th>BU</th>
            <th>B·ªô ph·∫≠n</th>
            <th>L√Ω do c·∫•p l·∫°i</th>
            <th>M·∫≠t Kh·∫©u M·ªõi</th>
            <th>Team</th>
            <th>Ng√†y C·∫•p L·∫°i</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<!-- TOAST -->
<div id="toast" class="toast">Copied!</div>

<!-- IMPORT DATA -->
<script src="datapassCadena.js"></script>

<script>
let filteredData = [];

/* ========================= CHECK KEY ========================= */
function askKeyAndFilter() {
    let key = prompt("üîê Nh·∫≠p KEY ƒë·ªÉ xem Pass CADENA:");

    if (!key) {
        alert("‚ùå B·∫°n ch∆∞a nh·∫≠p KEY.");
        return;
    }

    filteredData = passCadena.filter(
        x => (x.Key + "").toLowerCase() === key.toLowerCase()
    );

    if (filteredData.length === 0) {
        alert("‚ùå KEY kh√¥ng ƒë√∫ng ho·∫∑c kh√¥ng t·ªìn t·∫°i!");
        return;
    }

    renderTable(filteredData);
}

/* ========================= RENDER TABLE ========================= */
function renderTable(data){
    let tbody = document.querySelector("#passTable tbody");
    tbody.innerHTML = "";

    data.forEach(r=>{
        tbody.innerHTML += `
            <tr>
                <td>${r.Date || ""}</td>
                <td>${r.MSNV || ""}</td>
                <td>${r.HoTen || ""}</td>
                <td>${r.BU || ""}</td>
                <td>${r.BoPhan || ""}</td>
                <td>${r.LyDo || ""}</td>
                <td>
                    <span>${r.MatKhauMoi || ""}</span>
                    <button class="copy-btn" onclick="copyPassword('${r.MatKhauMoi || ""}')">üìã</button>
                </td>
                <td>${r.Team || ""}</td>
                <td>${r.NgayCapLai || ""}</td>
            </tr>
        `;
    });
}

/* ========================= COPY PASSWORD ========================= */
function copyPassword(text) {
    navigator.clipboard.writeText(text);
    showToast();
}

/* ========================= TOAST ========================= */
function showToast() {
    let t = document.getElementById("toast");
    t.classList.add("show");

    setTimeout(() => {
        t.classList.remove("show");
    }, 2000);
}

/* ========================= SEARCH REALTIME ========================= */
document.getElementById("searchInput").addEventListener("input", function(){
    let q = this.value.toLowerCase();

    let results = filteredData.filter(row =>
        (row.MSNV + "").toLowerCase().includes(q) ||
        (row.HoTen + "").toLowerCase().includes(q)
    );

    renderTable(results);
});

</script>

</body>
</html>
