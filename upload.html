<!DOCTYPE html>
<html>
<body>
    <h2>Upload hình vào SharePoint</h2>
    <input type="file" id="fileInput">
    <button onclick="upload()">Upload</button>
    <p id="status"></p>

<script>
async function upload() {
    const file = document.getElementById("fileInput").files[0];
    if (!file) { alert("Chọn file trước!"); return; }

    document.getElementById("status").innerText = "Đang upload...";

    const arrayBuffer = await file.arrayBuffer();
    const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));

    const body = JSON.stringify({
        Name: file.name,
        ContentBytes: base64
    });

    const flowUrl = "URL_FLOW_CUA_CRIS";  // <-- dán URL Flow vào đây

    const res = await fetch(flowUrl, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body
    });

    document.getElementById("status").innerText =
        res.ok ? "Upload thành công!" : "Lỗi: " + (await res.text());
}
</script>
</body>
</html>
